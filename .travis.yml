sudo: true
dist: jammy

services:
  - docker

install:
  - docker-compose build

script:
  - docker-compose run --entrypoint="pytest tests" nycdb

jobs:
  include:
    - env:
        PYTHON_VERSION: 3.12-rc-bullseye
        POSTGRES_VERSION: 15
    - env:
        PYTHON_VERSION: 3.11-bullseye
        POSTGRES_VERSION: 15
    - env:
        PYTHON_VERSION: 3.11-bullseye
        POSTGRES_VERSION: 14
    - env:
        PYTHON_VERSION: 3.10-bullseye
        POSTGRES_VERSION: 14
    - env:
        PYTHON_VERSION: 3.10-bullseye
        POSTGRES_VERSION: 13
    - env:
        PYTHON_VERSION: 3.10-bullseye
        POSTGRES_VERSION: 12
    - env:
        PYTHON_VERSION: 3.9-bullseye
        POSTGRES_VERSION: 14
    - env:
        PYTHON_VERSION: 3.8-bullseye
        POSTGRES_VERSION: 14
